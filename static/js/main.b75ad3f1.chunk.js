(this["webpackJsonpfind-a-cowin"]=this["webpackJsonpfind-a-cowin"]||[]).push([[0],{150:function(e,t,c){},151:function(e,t,c){},180:function(e,t,c){},204:function(e,t,c){},205:function(e,t,c){},209:function(e,t,c){},210:function(e,t,c){},211:function(e,t,c){},214:function(e,t,c){"use strict";c.r(t);var n,s=c(0),a=c.n(s),r=c(19),i=c.n(r),o=(c(150),c(36)),l=(c(151),c(9)),d=c(23),u="SETTINGS_CALENDARBYDIST_VIEW",j="SETTINGS_CALENDARBYDIST_AR",b="SETTINGS_CALENDARBYDIST_AR_INT",h="table",f=!1,O=null,m={calendarByDistrictView:localStorage.getItem(u)||h,calendarByDistrictAutoRefresh:"true"===localStorage.getItem(j)||f,calendarByDistrictAutoRefreshInterval:parseInt(localStorage.getItem(b))||O},p=Object(d.c)({name:"settings",initialState:m,reducers:{resetSettings:function(e,t){localStorage.setItem("SETTINGS","true"),localStorage.setItem(u,h),localStorage.setItem(j,f),localStorage.setItem(b,O),e.calendarByDistrictView=h,e.calendarByDistrictAutoRefresh=f,e.calendarByDistrictAutoRefreshInterval=O},setCalendarByDistrictView:function(e,t){var c=t.payload.viewName;e.calendarByDistrictView=c,localStorage.setItem(u,c)},setCalendarByDistrictAutoRefreshInterval:function(e,t){var c=t.payload.interval;null===c?(e.calendarByDistrictAutoRefresh=!1,e.calendarByDistrictAutoRefreshInterval=null,localStorage.setItem("SETTINGS_CALENDARBYDIST_AR","false"),localStorage.removeItem("SETTINGS_CALENDARBYDIST_AR_INT")):(e.calendarByDistrictAutoRefresh=!0,e.calendarByDistrictAutoRefreshInterval=c,localStorage.setItem("SETTINGS_CALENDARBYDIST_AR","true"),localStorage.setItem("SETTINGS_CALENDARBYDIST_AR_INT",c.toString()))}}}),v=p.actions,x=v.resetSettings,g=v.setCalendarByDistrictView,N=v.setCalendarByDistrictAutoRefreshInterval,y=p.reducer,I=c(20),S=c(28),k=c.n(S),w=c(38),C=c(59),D=c(57),R=c(39),A=c.n(R),_=c(11);function B(e){return Object(_.filter)((function(e){return"Free"===e.fee_type}),e)}function T(e){return Object(_.filter)((function(e){return"Paid"===e.fee_type}),e)}function E(e,t){var c=Object(_.filter)((function(e){return Object(_.some)((function(e){return t.includes(e.vaccine)}),e.sessions)}),e),n=[];return c.forEach((function(e){var c=Object(_.clone)(e);c.sessions=Object(_.filter)((function(e){return t.includes(e.vaccine)}),e.sessions),n.push(c)})),n}function F(e,t){return Object(_.filter)((function(e){var c=[e.center_id.toString(),e.name,e.address,e.block_name].join(" ").toLowerCase();return Object(_.some)((function(e){return c.indexOf(e.toLowerCase())>=0}),t)}),e)}function L(e,t,c,n){var s=n[0]?e[c[0]]===t[0]&&e[c[1]]===t[1]:e[c[0]]===t[0]||e[c[1]]===t[1];return 2===t.length?s:3===t.length&&(n[1]?s&&e[c[2]]!==t[2]:s||e[c[2]]!==t[2])}function P(e,t){var c,n,s,a=t.eighteenAbove,r=t.eighteenFortyFour,i=t.fortyFiveAbove,o="min_age_limit",l="max_age_limit";if(a===r&&a===i)return e;if(a&&r)c=[18,44],n=[o,l],s=[!1];else if(a&&i)c=[18,45,44],n=[o,o,l],s=[!1,!0];else if(r&&i)c=[45,44],n=[o,l],s=[!1];else if(a)c=[18,void 0],n=[o,l],s=[!0];else if(r)c=[18,44],n=[o,l],s=[!0];else{if(!i)return e;c=[45,void 0],n=[o,l],s=[!0]}var d=Object(_.filter)((function(e){return Object(_.some)((function(e){return L(e,c,n,s)}),e.sessions)}),e),u=[];return d.forEach((function(e){var t=Object(_.clone)(e);t.sessions=Object(_.filter)((function(e){return L(e,c,n,s)}),e.sessions),u.push(t)})),u}function V(e,t){return Object(_.orderBy)((function(e){return Object(_.sumBy)((function(e){return e.available_capacity}),e.sessions)}),t,e)}var G={states:[],districts:[],selected:{stateEnt:{stateName:"Select a State",stateId:null},districtEnt:{districtName:"Select a District",districtId:null}},calendarByDistrict:{centers:[]},calendarByCenter:{},vaccinationReports:{},publicReports:{},status:{states:"idle",districts:"idle",calendarByDistrict:"idle",calendarByCenter:function(){var e={},t=JSON.parse(localStorage.getItem("starred"));if(t){var c,n=Object(C.a)(t);try{for(n.s();!(c=n.n()).done;){e[c.value]="idle"}}catch(s){n.e(s)}finally{n.f()}}return e}(),vaccinationReports:"idle",publicReports:"idle"},error:{states:null,districts:null,calendarByDistrict:null,vaccinationReports:null,publicReports:null},filters:{keywords:[],feeType:{Free:!0,Paid:!0},vaccines:{covaxin:{name:"COVAXIN",checked:!0},covishield:{name:"COVISHIELD",checked:!0},sputnik:{name:"SPUTNIK V",checked:!0}},ages:{minAge:null,maxAge:null,eighteenAbove:!0,eighteenFortyFour:!0,fortyFiveAbove:!0}},sort:{session:{doses:["desc","desc"]},center:{totalDoses:"desc"}}},M=Object(d.b)("cowin/calendarByDistrict",function(){var e=Object(w.a)(k.a.mark((function e(t){var c,n,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.districtId,n=t.date,e.next=3,A.a.get("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id=\n            ".concat(c,"&date=").concat(n));case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),H=Object(d.b)("cowin/calendarByCenter",function(){var e=Object(w.a)(k.a.mark((function e(t){var c,n,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.centerId,n=t.date,e.next=3,A.a.get("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByCenter?center_id=\n    ".concat(c,"&date=").concat(n));case 3:return s=e.sent,e.abrupt("return",s.data.centers);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Y=Object(d.b)("cowin/fetchStates",Object(w.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/states");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),W=Object(d.b)("cowin/fetchDistricts",function(){var e=Object(w.a)(k.a.mark((function e(t){var c,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.stateId,e.next=3,A.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/districts/".concat(c));case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=Object(d.b)("cowin/fetchVaccinationReports",function(){var e=Object(w.a)(k.a.mark((function e(t){var c,n,s,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.stateId,n=t.districtId,s=t.date,e.next=3,A.a.get("https://api.cowin.gov.in/api/v1/reports/v2/getVacPublicReports?\n        state_id=".concat(c,"&district_id=").concat(n,"&date=").concat(s));case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q=Object(d.b)("cowin/fetchPublicReports",function(){var e=Object(w.a)(k.a.mark((function e(t){var c,n,s,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.stateId,n=t.districtId,s=t.date,e.next=3,A.a.get("https://api.cowin.gov.in/api/v1/reports/v2/getPublicReports?\n        state_id=".concat(c,"&district_id=").concat(n,"&date=").concat(s));case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J=Object(d.c)({name:"cowin",initialState:G,reducers:{resetDistrictStore:function(e){e.districts=[]},resetCalendarByDistrictStore:function(e){e.calendarByDistrict={centers:[]}},setSelectedState:function(e,t){var c=t.payload.stateName;e.selected.stateEnt.stateName=c,e.status.calendarByDistrict="idle",t.payload.stateId?e.selected.stateEnt.stateId=t.payload.stateId:e.selected.stateEnt.stateId=null},setCalendarByCenterStatus:function(e,t){var c=t.payload,n=c.centerId,s=c.fetchStatus;e.status.calendarByCenter[n]=s},setSelectedDistrict:function(e,t){var c=t.payload.districtName;e.selected.districtEnt.districtName=c,t.payload.districtId?e.selected.districtEnt.districtId=t.payload.districtId:e.selected.districtEnt.districtId=null},setFeeFilter:function(e,t){var c=t.payload,n=c.feeType,s=c.typeSelected;e.filters.feeType[n]=s},setKeywordFilter:function(e,t){e.filters.keywords=t.payload},setVaccineFilter:function(e,t){var c=t.payload,n=c.vaccine,s=c.value;switch(n){case"COVAXIN":e.filters.vaccines.covaxin.checked=s;break;case"COVISHIELD":e.filters.vaccines.covishield.checked=s;break;case"SPUTNIK V":e.filters.vaccines.sputnik.checked=s}},setAgeFilter:function(e,t){var c=t.payload,n=c.age,s=c.value;switch(n){case"age-18-above":e.filters.ages.eighteenAbove=s;break;case"age-18-44":e.filters.ages.eighteenFortyFour=s;break;case"age-45-above":e.filters.ages.fortyFiveAbove=s}}},extraReducers:(n={},Object(I.a)(n,M.pending,(function(e){e.status.calendarByDistrict="loading"})),Object(I.a)(n,M.fulfilled,(function(e,t){e.status.calendarByDistrict="succeeded",e.calendarByDistrict=t.payload})),Object(I.a)(n,M.rejected,(function(e,t){e.status.calendarByDistrict="failed",e.error.calendarByDistrict=t.error.message})),Object(I.a)(n,H.pending,(function(e,t){var c=t.meta.arg.centerId;e.status.calendarByCenter[c]="idle"})),Object(I.a)(n,H.fulfilled,(function(e,t){var c=t.meta.arg.centerId;e.status.calendarByCenter[c]="succeeded",e.calendarByCenter[c]=t.payload})),Object(I.a)(n,H.rejected,(function(e,t){var c=t.meta.arg.centerId;e.status.calendarByCenter[c]="failed",e.error.calendarByCenter[c]=t.error.message})),Object(I.a)(n,Y.pending,(function(e){e.status.states="loading"})),Object(I.a)(n,Y.fulfilled,(function(e,t){e.status.states="succeeded",e.states=t.payload.states})),Object(I.a)(n,Y.rejected,(function(e,t){e.status.states="failed",e.error.states=t.error.message})),Object(I.a)(n,W.pending,(function(e){e.status.districts="loading"})),Object(I.a)(n,W.fulfilled,(function(e,t){e.status.districts="succeeded",e.districts=t.payload.districts})),Object(I.a)(n,W.rejected,(function(e,t){e.status.districts="failed",e.error.districts=t.error.message})),Object(I.a)(n,z.fulfilled,(function(e,t){e.status.vaccinationReports="succeeded",e.error.vaccinationReports=null,e.vaccinationReports=t.payload})),Object(I.a)(n,z.rejected,(function(e,t){e.status.vaccinationReports="failed",e.error.vaccinationReports=t.error.message})),Object(I.a)(n,q.fulfilled,(function(e,t){e.status.publicReports="succeeded",e.error.publicReports=null,e.publicReports=t.payload})),Object(I.a)(n,q.rejected,(function(e,t){e.status.publicReports="failed",e.error.publicReports=t.error.message})),n)}),K=J.actions,U=K.resetDistrictStore,X=K.resetCalendarByDistrictStore,Q=K.setKeywordFilter,Z=K.setFeeFilter,$=K.setVaccineFilter,ee=K.setAgeFilter,te=K.setSelectedState,ce=K.setSelectedDistrict,ne=K.setCalendarByCenterStatus,se=function(e){return e.cowin.calendarByDistrict.centers},ae=function(e){return e.cowin.calendarByCenter},re=function(e){return e.cowin.filters.keywords},ie=function(e){return e.cowin.filters.feeType},oe=function(e){return e.cowin.filters.vaccines},le=function(e){return e.cowin.filters.ages},de=function(e){return e.cowin.states},ue=function(e){return e.cowin.districts},je=function(e){return e.cowin.selected.stateEnt},be=function(e){return e.cowin.selected.districtEnt},he=Object(D.a)(se,ie,re,oe,le,(function(e){return e.cowin.sort}),(function(e,t,c,n,s,a){var r=[];if(t.Free!==t.Paid&&(t.Free?r.push(B):t.Paid&&r.push(T)),n){var i=Object(_.pickBy)((function(e){return e.checked}),n),o=[];Object.values(i).forEach((function(e){return o.push(e.name)})),o.length>0&&r.push(Object(_.partialRight)(E,[o]))}return s&&r.push(Object(_.partialRight)(P,[s])),c.length>0&&r.push(Object(_.partialRight)(F,[c])),r.push(Object(_.partialRight)(V,[[a.center.totalDoses]])),Object(_.flow)(r)(e)})),fe=J.reducer,Oe=(c(180),c(101)),me=c(34),pe=c(223),ve=c(1);function xe(e){var t=e.sessions;return Object(ve.jsx)(ve.Fragment,{children:t&&t.map((function(e,t){return Object(ve.jsxs)(pe.y,{className:"session",intent:me.a.PRIMARY,minimal:!0,children:[Object(ve.jsx)(pe.k,{icon:"calendar"}),Object(ve.jsx)("span",{className:"session-info",children:e.date}),Object(ve.jsx)("span",{className:"session-info",children:e.vaccine}),Object(ve.jsxs)("span",{className:"session-info",children:["Dose 1: ",e.available_capacity_dose1]}),Object(ve.jsxs)("span",{className:"session-info",children:["Dose 2: ",e.available_capacity_dose2]})]},t)}))})}function ge(e){var t=e.sessions;return Object(ve.jsxs)("table",{className:"bp3-html-table bp3-html-table-bordered bp3-html-table-condensed bp3-interactive sessions-table",children:[Object(ve.jsx)("thead",{children:Object(ve.jsxs)("tr",{children:[Object(ve.jsx)("th",{children:"Date"}),Object(ve.jsx)("th",{children:"Vaccine"}),Object(ve.jsx)("th",{children:"Dose 1"}),Object(ve.jsx)("th",{children:"Dose 2"}),Object(ve.jsx)("th",{children:"Min. Age"}),Object(ve.jsx)("th",{children:"Max. Age"})]})}),Object(ve.jsx)("tbody",{children:t&&t.map((function(e,t){return Object(ve.jsxs)("tr",{children:[Object(ve.jsx)("td",{children:e.date}),Object(ve.jsx)("td",{children:e.vaccine}),Object(ve.jsx)("td",{children:e.available_capacity_dose1}),Object(ve.jsx)("td",{children:e.available_capacity_dose2}),Object(ve.jsx)("td",{children:e.min_age_limit||"-"}),Object(ve.jsx)("td",{children:e.max_age_limit||"-"})]},t)}))})]})}var Ne={centers:JSON.parse(localStorage.getItem("starred"))||[]},ye=Object(d.c)({name:"starredCenters",initialState:Ne,reducers:{resetStarredCenters:function(e,t){localStorage.setItem("starred",JSON.stringify([])),e.centers=[]},setStarredCenters:function(e,t){var c=t.payload.centers;localStorage.setItem("starred",JSON.stringify(c)),e.centers=c}}}),Ie=ye.actions,Se=Ie.resetStarredCenters,ke=Ie.setStarredCenters,we=function(e){return e.starredCenters.centers},Ce=ye.reducer,De={Paid:me.a.WARNING,Free:me.a.SUCCESS};function Re(e){var t,c=e.center,n=e.loading,s=void 0!==n&&n,a=e.showStarButton,r=void 0===a||a,i=Object(l.c)((function(e){return e.settings.calendarByDistrictView})),o=Object(l.b)(),d=Object(l.c)(we);if(s)return Object(ve.jsxs)("div",{className:"center bp3-elevation-1",children:[Object(ve.jsxs)("div",{className:"center-info-container",children:[Object(ve.jsx)("span",{className:"center-name bp3-skeleton",children:"Loading"}),Object(ve.jsx)(pe.y,{className:"center-fee-type bp3-skeleton",intent:me.a.PRIMARY,children:"Loading"}),Object(ve.jsxs)("div",{className:"vaccine-fee-tags",children:[Object(ve.jsx)(pe.y,{className:"fee-type bp3-skeleton",children:"Loading"},1),Object(ve.jsx)(pe.y,{className:"fee-type bp3-skeleton",children:"Loading"},1),Object(ve.jsx)(pe.y,{className:"fee-type bp3-skeleton",children:"Loading"},1)]}),Object(ve.jsx)(pe.a,{className:"bp3-skeleton",icon:"star"})]}),Object(ve.jsxs)("div",{className:"center-info-container",children:[Object(ve.jsx)("span",{className:"center-info bp3-skeleton",children:"Loading"}),Object(ve.jsx)("span",{className:"center-info block-name bp3-skeleton",children:"Loading"})]}),Object(ve.jsx)("div",{className:"sessions-skeleton bp3-skeleton",children:"Loading"})]},c);"table"===i?t=Object(ve.jsx)(ge,{sessions:c.sessions}):"tags"===i&&(t=Object(ve.jsx)(xe,{sessions:c.sessions}));var u;return Object(ve.jsxs)("div",{className:"center bp3-elevation-1",children:[Object(ve.jsx)("div",{className:"center-info-container",children:Object(ve.jsx)(pe.i,{children:c.name})}),Object(ve.jsxs)("div",{className:"center-info-container center-actions",children:[Object(ve.jsx)(pe.y,{className:"center-fee-type",intent:De[c.fee_type],children:c.fee_type}),c.vaccine_fees&&c.vaccine_fees.map((function(e,t){return Object(ve.jsxs)(pe.y,{className:"fee-type",children:[e.vaccine,": \u20b9 ",e.fee]},t)})),r&&(u=c.center_id,console.log(d),d.includes(u)?Object(ve.jsx)(pe.a,{className:"center-star-button",icon:"star",text:"Remove",onClick:function(e){return function(e,t){var c=d.filter((function(e){return e!==t}));o(ke({centers:c}))}(0,c.center_id)},small:!0}):Object(ve.jsx)(pe.a,{className:"center-star-button",icon:"star-empty",text:"Star",onClick:function(e){return function(e,t){o(ne({centerId:t,fetchStatus:"idle"})),o(ke({centers:[].concat(Object(Oe.a)(d),[t])}));var c={href:"".concat("/find-a-cowin","/starred"),text:"See here"};et.show({message:"Center starred!",intent:me.a.SUCCESS,icon:"star",action:c})}(0,c.center_id)},small:!0}))]}),Object(ve.jsxs)("div",{className:"center-info-container",children:[Object(ve.jsx)("span",{className:"center-info",children:c.address}),Object(ve.jsxs)("span",{className:"center-info block-name",children:["[",c.block_name,"]"]})]}),Object(ve.jsx)("div",{className:"sessions",children:t})]},c.center_id)}var Ae=c(224),_e=function(e,t,c,n){var s=t.toLowerCase(),a=e.toLowerCase();return n?s===a:s.indexOf(a)>=0},Be=function(e){var t=e.setState,c=e.selectedState,n=e.states;return Object(ve.jsx)("div",{className:"selector slot-toolbar-item",children:Object(ve.jsx)(Ae.a,{items:n,popoverProps:{popoverClassName:"selector-popover",minimal:!0},inputValueRenderer:function(e){return e.state_name},itemRenderer:function(e,t){var c=t.handleClick;t._modifiers,t._query;return Object(ve.jsx)(pe.n,{text:e.state_name,onClick:c},e.state_id)},onItemSelect:function(e,c){t(e)},itemPredicate:function(e,t,c,n){return _e(e,t.state_name,0,n)},noResults:Object(ve.jsx)(pe.n,{disabled:!0,text:"No results."}),children:Object(ve.jsx)(pe.a,{fill:!0,text:c.stateName,rightIcon:"caret-down"})})})},Te=function(e){var t=e.setDistrict,c=e.selectedDistrict,n=e.districts;return Object(ve.jsx)("div",{className:"selector slot-toolbar-item",children:Object(ve.jsx)(Ae.a,{items:n,popoverProps:{popoverClassName:"selector-popover",minimal:!0},inputValueRenderer:function(e){return e.district_name},itemRenderer:function(e,t){var c=t.handleClick;t._modifiers,t._query;return Object(ve.jsx)(pe.n,{text:e.district_name,onClick:c},e.district_id)},onItemSelect:function(e,c){t(e)},itemPredicate:function(e,t,c,n){return _e(e,t.district_name,0,n)},noResults:Object(ve.jsx)(pe.n,{disabled:!0,text:"No results."}),children:Object(ve.jsx)(pe.a,{fill:!0,text:c.districtName,rightIcon:"caret-down"})})})},Ee=a.a.memo(Be),Fe=a.a.memo(Te),Le=c(47);function Pe(e){var t=Object(l.b)(),c=Object(l.c)(ie),n=e.alignmentVertical,s=function(e,n){t(Z({feeType:n,typeSelected:!c[n]}))};return Object(ve.jsx)("div",{className:"fee-types",children:Object(ve.jsxs)(pe.e,{fill:!0,vertical:n,children:[Object(ve.jsx)(pe.d,{className:"fee-type-checkbox",label:"Free",checked:c.Free,onChange:function(e){return s(0,"Free")},alignIndicator:Le.a.RIGHT}),Object(ve.jsx)(pe.d,{className:"fee-type-checkbox",label:"Paid",checked:c.Paid,onChange:function(e){return s(0,"Paid")},alignIndicator:Le.a.RIGHT})]})})}function Ve(e,t,c){var n=e.getMonth(),s=e.getDate().toString(),a=e.getFullYear().toString(),r=a.substr(-2);return 1===(n=(n+1).toString()).length&&(n="0"+n),1===s.length&&(s="0"+s),2===c?[a,n,s].join(t):[s,n,r].join(t)}c(204);var Ge=function(e){var t=Object(l.b)(),c=e.isOpen,n=e.setIsOpen,s=Object(l.c)((function(e){return e.settings.calendarByDistrictView})),a=Object(l.c)((function(e){return e.settings.calendarByDistrictAutoRefresh})),r=Object(l.c)((function(e){return e.settings.calendarByDistrictAutoRefreshInterval})),i={table:"Table",tags:"Tags",4e3:"4 Seconds",5e3:"5 Seconds",6e3:"6 Seconds",1e4:"10 Seconds"},o=function(){return n(!1)},d=["tags","table"],u=[4e3,5e3,6e3,1e4];return Object(ve.jsxs)(pe.f,{id:"settings",className:"bp3-dialog settings-dialog",isOpen:c,canOutsideClickClose:!0,onClose:o,usePortal:!1,children:[Object(ve.jsxs)("div",{className:"bp3-dialog-header",children:[Object(ve.jsx)("h4",{className:"bp3-heading",children:"Settings"}),Object(ve.jsx)(pe.a,{"aria-label":"Close",className:"bp3-dialog-close-button bp3-button bp3-minimal",icon:"cross",onClick:o})]}),Object(ve.jsxs)("div",{className:"bp3-dialog-body",children:[Object(ve.jsx)(pe.c,{className:"settings-item",children:Object(ve.jsxs)(pe.e,{vertical:!0,children:[Object(ve.jsx)("div",{className:"settings-caption-vertical",children:"View appointments of a Center as"}),Object(ve.jsxs)("div",{className:"bp3-html-select",children:[Object(ve.jsx)("select",{onChange:function(e){t(g({viewName:e.target.value}))},value:s,children:d&&d.map((function(e,t){return Object(ve.jsx)("option",{value:e,children:i[e]},t)}))}),Object(ve.jsx)(pe.k,{icon:"double-caret-vertical"})]})]})}),Object(ve.jsx)(pe.c,{className:"settings-item",children:Object(ve.jsxs)(pe.e,{fill:!0,children:[Object(ve.jsx)(pe.x,{label:"Auto refresh data",checked:a,onChange:function(e){e.target.checked?t(N({interval:5e3})):t(N({interval:null}))},alignIndicator:"right"}),Object(ve.jsx)("div",{className:"settings-caption-horizontal",children:"Auto-refresh Interval"}),Object(ve.jsxs)("div",{className:"bp3-html-select",children:[Object(ve.jsx)("select",{onChange:function(e){t(N({interval:e.target.value}))},value:r||"",disabled:!a,children:u&&u.map((function(e,t){return Object(ve.jsx)("option",{value:e,children:i[e]},t)}))}),Object(ve.jsx)(pe.k,{icon:"double-caret-vertical"})]})]})})]})]})},Me=(c(205),c(40)),He=c(61);function Ye(){var e=Object(l.b)(),t=Object(s.useState)(!1),c=Object(o.a)(t,2),n=c[0],a=c[1],r=Object(l.c)(oe),i=Object(l.c)(le),d=function(t,c){e($({vaccine:c,value:t.target.checked}))},u=function(t){e(ee({age:t.target.id,value:t.target.checked}))};return Object(ve.jsx)(Me.a,{content:Object(ve.jsxs)("div",{children:[Object(ve.jsxs)("div",{className:"filter-group",children:[Object(ve.jsx)(pe.j,{children:"Vaccines"}),Object(ve.jsx)(pe.d,{className:"filter-item",label:"Covaxin",checked:r.covaxin.checked,onChange:function(e){return d(e,"COVAXIN")},alignIndicator:Le.a.RIGHT}),Object(ve.jsx)(pe.d,{className:"filter-item",label:"Covishield",checked:r.covishield.checked,onChange:function(e){return d(e,"COVISHIELD")},alignIndicator:Le.a.RIGHT}),Object(ve.jsx)(pe.d,{className:"filter-item",label:"Sputnik V",checked:r.sputnik.checked,onChange:function(e){return d(e,"SPUTNIK V")},alignIndicator:Le.a.RIGHT})]}),Object(ve.jsxs)("div",{className:"filter-group is-hidden-desktop",children:[Object(ve.jsx)(pe.j,{children:"Fee Type"}),Object(ve.jsx)(Pe,{alignmentVertical:!0})]}),Object(ve.jsxs)("div",{className:"filter-group",children:[Object(ve.jsx)(pe.j,{children:"Age"}),Object(ve.jsx)(pe.d,{className:"filter-item",id:"age-18-above",label:"18 and above",checked:i.eighteenAbove,onChange:u,alignIndicator:Le.a.RIGHT}),Object(ve.jsx)(pe.d,{className:"filter-item",id:"age-18-44",label:"18 to 44",checked:i.eighteenFortyFour,onChange:u,alignIndicator:Le.a.RIGHT}),Object(ve.jsx)(pe.d,{className:"filter-item",id:"age-45-above",label:"45 and above",checked:i.fortyFiveAbove,onChange:u,alignIndicator:Le.a.RIGHT})]}),Object(ve.jsx)(pe.a,{intent:me.a.DANGER,className:He.a.POPOVER2_DISMISS,text:"Close",fill:!0})]}),popoverClassName:He.a.POPOVER2_CONTENT_SIZING,interactionKind:"click",isOpen:n,onInteraction:function(e){return a(e)},placement:"bottom",children:Object(ve.jsx)(pe.a,{icon:"filter-list",text:"Filters"})})}var We=c(31);function ze(){var e,t=Object(l.b)(),c=Object(l.c)((function(e){return e.cowin.status.calendarByDistrict})),n=Object(l.c)(de),a=Object(l.c)(ue),r=Object(l.c)(he),i=Object(l.c)(se),d=Object(l.c)(je),u=Object(l.c)(be),j=Object(l.c)(re),b=Object(s.useState)(!1),h=Object(o.a)(b,2),f=h[0],O=h[1],m=Object(l.c)((function(e){return e.settings.calendarByDistrictAutoRefresh})),p=Object(l.c)((function(e){return e.settings.calendarByDistrictAutoRefreshInterval})),v=Object(l.c)((function(e){return e.cowin.status.states})),x=Object(s.useRef)(),g=function(){if("Select a District"!==u.districtName&&"Select a State"!==d.stateName){var e=new Date;e=Ve(e,"-"),console.log("Refreshing data",(new Date).toLocaleTimeString(),{districtName:u.districtName}),t(M({districtId:u.districtId,date:e}))}};Object(s.useEffect)((function(){if(m){console.log("Old timeout:",x.current),clearInterval(x.current);var e=setInterval((function(){g()}),p);return x.current=e,console.log("New timeout:",x.current),function(){return clearInterval(x.current)}}})),"idle"===c||"Select a district"===u.district_name?e=Object(ve.jsx)(pe.s,{icon:"info-sign",title:"Select State and District",children:Object(ve.jsxs)("div",{children:[Object(ve.jsx)(pe.k,{icon:"lightbulb",intent:me.a.WARNING}),"Tip: Use the refresh button to refresh the data"]})}):"loading"===c?e=Object(ve.jsx)(pe.w,{className:"centers-loading-spinner",intent:me.a.PRIMARY,size:50}):"succeeded"===c?e=r.length>0?r.map((function(e,t){return Object(ve.jsx)(Re,{center:e},t)})):Object(ve.jsx)(pe.s,{icon:"zoom-out",title:"No centers match your query.",description:"It might be helpful to divide your query into multiple keywords."}):"succeeded"===c&&0===i.length?e=Object(ve.jsx)(pe.s,{icon:"issue",title:"Currently, no slots are available.",description:"Please check again after sometime."}):"failed"===c&&(e=Object(ve.jsx)(pe.s,{icon:"error",title:"There was a problem!",description:"Couldn't load data."}));var N=Object(ve.jsx)(pe.a,{icon:"cross",minimal:!0,onClick:function(){return t(Q([]))}});Object(s.useEffect)((function(){"idle"===v&&t(Y())}),[v,t]);return Object(ve.jsxs)("div",{className:"slot-checker-container",children:[Object(ve.jsxs)("div",{className:"slot-checker",children:[Object(ve.jsx)("div",{className:"slot-toolbar-container",children:Object(ve.jsxs)("div",{className:"slot-toolbar columns",children:[Object(ve.jsxs)("div",{className:"slot-toolbar-item-group selectors column is-narrow-desktop",children:[Object(ve.jsx)(Ee,{states:n,selectedState:d,setState:function(e){t(U()),t(X()),t(te({stateId:e.state_id,stateName:e.state_name})),t(W({stateId:e.state_id})),t(ce({districtName:"Select a District"}))}}),Object(ve.jsx)(Fe,{districts:a,selectedDistrict:u,setDistrict:function(e){t(ce({districtId:e.district_id,districtName:e.district_name}));var c=new Date;c=Ve(c,"-"),t(M({districtId:e.district_id,date:c}))}})]}),Object(ve.jsxs)("div",{className:"slot-toolbar-item-group column",children:[Object(ve.jsx)(pe.z,{className:"slot-toolbar-item search",leftIcon:"search",placeholder:"Search with multiple keywords..",onChange:function(e){return t(Q(e))},values:j,rightElement:N}),Object(ve.jsx)("div",{className:"is-hidden-mobile slot-toolbar-item fee-types-container",children:Object(ve.jsx)(Pe,{alignmentVertical:!1})})]}),Object(ve.jsx)("div",{className:"slot-toolbar-item-group column is-narrow-desktop",children:Object(ve.jsxs)(pe.b,{children:[Object(ve.jsx)(pe.a,{icon:"refresh",text:"Refresh",onClick:g}),Object(ve.jsx)(We.b,{to:"/starred",children:Object(ve.jsx)(pe.a,{icon:"star",text:"Starred"})}),Object(ve.jsx)(Ye,{}),Object(ve.jsx)(pe.a,{icon:"settings",text:"Settings",onClick:function(){O(!f)}})]})})]})}),Object(ve.jsx)("div",{className:"centers",children:e})]}),Object(ve.jsx)(Ge,{isOpen:f,setIsOpen:O})]})}var qe=c(18),Je=c(225),Ke=c(3),Ue=c(58);c(209);function Xe(){return Object(ve.jsx)("div",{id:"home",children:Object(ve.jsx)("div",{className:"home-container",children:Object(ve.jsxs)("div",{className:"home-content",children:[Object(ve.jsx)(pe.g,{className:"home-title",children:"Find-a-CoWIN"}),Object(ve.jsx)("span",{children:"A slot finder/checker for the CoWIN vaccination platform"}),Object(ve.jsx)("span",{children:"built using the CoWIN Public API."}),Object(ve.jsxs)("div",{className:"home-links",children:[Object(ve.jsx)("a",{href:"https://faraaz.tech/contact",children:Object(ve.jsx)(Ue.a,{content:"Get in touch",position:"bottom",children:Object(ve.jsx)(pe.a,{className:Ke.a.MINIMAL,icon:"user",text:"faraaz.tech"})})}),Object(ve.jsx)("a",{href:"https://github.com/faraazb/find-a-cowin",children:Object(ve.jsx)(Ue.a,{content:"Check out the source code",position:"bottom",children:Object(ve.jsx)(pe.a,{className:Ke.a.MINIMAL,icon:"git-branch",text:"GitHub"})})})]}),Object(ve.jsx)(pe.h,{className:"home-help-title",children:"Help regarding usage"}),Object(ve.jsx)("div",{className:"home-help",children:Object(ve.jsxs)("table",{class:"bp3-html-table bp3-html-table-bordered query-table",children:[Object(ve.jsx)("thead",{children:Object(ve.jsxs)("tr",{children:[Object(ve.jsx)("th",{children:"Query"}),Object(ve.jsx)("th",{children:"Answer"})]})}),Object(ve.jsxs)("tbody",{children:[Object(ve.jsxs)("tr",{children:[Object(ve.jsx)("td",{children:"Nothing happens when I type in the search bar.."}),Object(ve.jsxs)("td",{children:["Press enter key! This is so that you can use multiple keywords. For e.g. ",Object(ve.jsx)(pe.z,{values:["Andheri","Borivali"]})," to get all the centers that match for ",Object(ve.jsx)("b",{children:"either"})," Andheri or Borivali."]})]}),Object(ve.jsxs)("tr",{children:[Object(ve.jsx)("td",{children:"What does the refresh button do?"}),Object(ve.jsx)("td",{children:"It fetches the data again, without refreshing the page or resetting your filters."})]}),Object(ve.jsxs)("tr",{children:[Object(ve.jsx)("td",{children:"Where are starred centers saved?"}),Object(ve.jsx)("td",{children:"These are stored in your browser's local storage and cannot sync across devices."})]}),Object(ve.jsxs)("tr",{children:[Object(ve.jsx)("td",{children:"What does auto-refresh under Settings do?"}),Object(ve.jsx)("td",{children:"It regularly fetches new data for the selected district at the selected interval."})]})]})]})})]})})})}c(210);function Qe(){return Object(ve.jsx)("div",{id:"four-o-four",children:Object(ve.jsx)("div",{className:"four-o-four-container",children:Object(ve.jsxs)("div",{className:"four-o-four-content",children:[Object(ve.jsx)(pe.g,{className:"four-o-four-title big",children:"404"}),Object(ve.jsx)(pe.g,{className:"four-o-four-title",children:"Not Found"}),Object(ve.jsx)("span",{children:"Please visit any of the below links."}),Object(ve.jsxs)("div",{className:"four-o-four-links",children:[Object(ve.jsx)(We.b,{to:"/",children:Object(ve.jsx)(pe.a,{className:Ke.a.MINIMAL,icon:"search",text:"Slot Finder"})}),Object(ve.jsx)(We.b,{to:"/about",children:Object(ve.jsx)(pe.a,{className:Ke.a.MINIMAL,icon:"info-sign",text:"About"})})]})]})})})}c(211);var Ze=function(){var e=Object(l.b)(),t=!localStorage.getItem("starred"),c=Object(l.c)(we),n=Object(l.c)(ae),a=Object(l.c)((function(e){return e.cowin.status.calendarByCenter}));Object(s.useEffect)((function(){t&&e(Se())})),Object(s.useEffect)((function(){var t=new Date;t=Ve(t,"-"),console.log(a);var n,s=Object(C.a)(c);try{for(s.s();!(n=s.n()).done;){var r=n.value;"idle"===a[r]&&e(H({centerId:r,date:t}))}}catch(i){s.e(i)}finally{s.f()}}),[c,a,e]);return Object(ve.jsxs)("div",{className:"starred-centers",children:[Object(ve.jsx)("div",{className:"header-container",children:Object(ve.jsxs)("div",{className:"header",children:[Object(ve.jsx)(We.b,{to:"/",children:Object(ve.jsx)(pe.a,{icon:"arrow-left",minimal:!0})}),Object(ve.jsx)(pe.h,{className:"heading",children:"Starred Centers"})]})}),Object(ve.jsxs)("div",{className:"centers",children:[0===c.length&&Object(ve.jsxs)("div",{className:"bp3-callout bp3-intent-warning",children:[Object(ve.jsx)("h4",{className:"bp3-heading",children:"No starred centers!"}),"Mark centers as starred using the ",Object(ve.jsx)(pe.a,{small:!0,outlined:!0,icon:"star",text:"Star"})," button."]}),c.length>0&&c.map((function(t,c){return function(t){var c;if("idle"===a[t]){var s=new Date;s=Ve(s,"-"),e(H({centerId:t,date:s})),c=Object(ve.jsx)(Re,{center:null,loading:!0},t)}else if("loading"===a[t])c=Object(ve.jsx)(pe.w,{className:"centers-loading-spinner",intent:me.a.PRIMARY,size:50});else if("succeeded"===a[t]){var r=n[t];c=Object(ve.jsx)(Re,{center:r},t)}return c}(t)}))]})]})},$e=c(15),et=pe.A.create({className:"app-toaster",position:$e.a.TOP});Je.a.onlyShowFocusOnTabs();var tt=function(){var e=Object(l.b)(),t=!localStorage.getItem("SETTINGS"),c=function(){var e=Object(s.useState)(window.matchMedia("(prefers-color-scheme: dark)").matches),t=Object(o.a)(e,2),c=t[0],n=t[1],a=function(e){n(e.matches)};return Object(s.useEffect)((function(){var e=window.matchMedia("(prefers-color-scheme: dark)");return e.addEventListener("change",a),function(){return e.removeEventListener("change",a)}}),[]),c}(),n=Object(s.useState)({name:c?"Light Theme":"Dark Theme",icon:c?"flash":"moon"}),a=Object(o.a)(n,2),r=a[0],i=a[1];return Object(s.useEffect)((function(){c&&document.getElementById("app").classList.add("bp3-dark")}),[c]),Object(s.useEffect)((function(){t&&(console.log("Resetting settings"),e(x()))})),Object(ve.jsx)(We.a,{basename:"/find-a-cowin",children:Object(ve.jsxs)("div",{id:"app",children:[Object(ve.jsxs)(pe.o,{children:[Object(ve.jsxs)(pe.q,{align:Le.a.LEFT,children:[Object(ve.jsx)(We.b,{to:"/",id:"find-a-cowin",children:Object(ve.jsx)(pe.r,{className:"navigation-header",children:Object(ve.jsx)("span",{className:"bp3-heading",children:"Find-a-CoWIN"})})}),Object(ve.jsx)(pe.p,{}),Object(ve.jsx)(We.b,{to:"/about",children:Object(ve.jsx)(pe.a,{className:Ke.a.MINIMAL,icon:"info-sign",text:"About"})})]}),Object(ve.jsx)(pe.q,{align:Le.a.RIGHT,children:Object(ve.jsx)(pe.a,{className:Ke.a.MINIMAL,icon:r.icon,text:r.name,onClick:function(){var e=document.getElementById("app");e.classList.contains("bp3-dark")?(e.classList.remove("bp3-dark"),i({name:"Dark Theme",icon:"moon"})):e.classList.contains("bp3-dark")||(e.classList.add("bp3-dark"),i({name:"Light Theme",icon:"flash"}))}})})]}),Object(ve.jsx)("div",{className:"app-route",children:Object(ve.jsxs)(qe.c,{children:[Object(ve.jsx)(qe.a,{path:"/starred",exact:!0,children:Object(ve.jsx)(Ze,{})}),Object(ve.jsx)(qe.a,{path:"/about",exact:!0,children:Object(ve.jsx)(Xe,{})}),Object(ve.jsx)(qe.a,{exact:!0,path:"/",children:Object(ve.jsx)(ze,{})}),Object(ve.jsx)(qe.a,{path:"*",children:Object(ve.jsx)(Qe,{})})]})})]})})},ct=Object(d.a)({reducer:{cowin:fe,settings:y,starredCenters:Ce}}),nt=(c(212),c(213),function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,226)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))});i.a.render(Object(ve.jsx)(a.a.StrictMode,{children:Object(ve.jsx)(l.a,{store:ct,children:Object(ve.jsx)(tt,{})})}),document.getElementById("root")),nt()}},[[214,1,2]]]);
//# sourceMappingURL=main.b75ad3f1.chunk.js.map